<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="product_template_form_view_inherit_stallion" model="ir.ui.view">

            <field name="name">product.template.form.inherit.stallion</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_only_form_view"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='categ_id']" position="after">
                    <field name="condition"/>
                    <field name="group"/>
                    <field name="nomenclature_string"/>
                </xpath>

                <xpath expr="//field[@name='list_price']" position="after">
                    <field name="brand_id"/>
                    <field name="subgroup_id"/>
                    <field name="manufacturer_id"/>
                </xpath>

                <button name="toggle_active" position="before">
                    <button name="#" class="oe_stat_button" type="action" icon="fa-building-o" attrs="{'invisible':[('is_manufactured','!=',True)]}">
                        <field string="Quantity" name="qty_product" widget="statinfo"/>
                    </button>
                </button>

                <field name='name' position="after">
                    <field name ='is_manufactured' invisible='1'/>
                </field>

            </field>
        </record>



        <record id="product_template_stock_form_view_inherit_stallion" model="ir.ui.view">
            <field name="name">product.template.form.inherit.stallion</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="stock.product_template_form_view_procurement_button"/>
            <field name="arch" type="xml">

                <xpath expr="//button[@name='action_open_quants']" position="attributes">
                    <attribute name="attrs">{'invisible':['|',('type', '!=', 'product'),('is_manufactured','=',True)]}</attribute>
                </xpath>

            </field>
        </record>


        <record id="product_template_search_view_inherit_stallion" model="ir.ui.view">

            <field name="name">product.template.search.inherit.stallion</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_search_view"/>
            <field name="arch" type="xml">

                <field name="categ_id" position="after">
                    <field name="brand_id" filter_domain="[('brand_id', 'ilike', raw_value)]"/>
                    <field name="subgroup_id" filter_domain="[('subgroup_id', 'ilike', raw_value)]"/>
                    <field name="manufacturer_id" filter_domain="[('manufacturer_id', 'ilike', raw_value)]"/>
                </field>

                <filter name="consumable" position="after">
                    <filter string="Refurbished" name="Refurbished" domain="[('condition', '=', 'refurb')]"/>
                    <filter string="Fresh" name="Fresh" domain="[('condition', '=', 'new')]"/>
                    <filter string="HDD" name="hdd" domain="[('group', '=', 'hdd')]"/>
                    <filter string="SSD" name="ssd" domain="[('group', '=', 'ssd')]"/>

                   <group expand="0" name="group_by" string="Group By">
                       <filter name="brand" string="Brand" domain="[]" context="{'group_by' : 'brand_id'}"/>
                       <filter name="subgroup" string="Subgroup" context="{'group_by': 'subgroup_id'}"/>
                       <filter name="mfg" string="MFG" context="{'group_by': 'manufacturer_id'}"/>
                   </group>

                </filter>

            </field>
        </record>


    </data>
</odoo>
